import plotly.express as px
import pandas as pd
import plotly.graph_objs as go


data = {"ACE":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-5.19,"End Month":"Jun","%Change Jun":-6.25},"ADVANC":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":2.36,"End Month":"Jun","%Change Jun":-9.32},"AEONTS":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":0.26,"End Month":"Jun","%Change Jun":-9.07},"AMATA":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":0.0,"End Month":"Jun","%Change Jun":-6.0},"AOT":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":3.72,"End Month":"Jun","%Change Jun":-2.88},"AP":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-3.45,"End Month":"Jun","%Change Jun":-10.71},"AWC":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":3.24,"End Month":"Jun","%Change Jun":-5.88},"BAM":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-2.09,"End Month":"Jun","%Change Jun":-4.84},"BANPU":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":1.64,"End Month":"Jun","%Change Jun":4.03},"BBL":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":0.77,"End Month":"Jun","%Change Jun":3.45},"BCH":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-3.79,"End Month":"Jun","%Change Jun":-8.91},"BCP":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-2.22,"End Month":"Jun","%Change Jun":-1.53},"BCPG":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-2.48,"End Month":"Jun","%Change Jun":-5.08},"BDMS":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":1.98,"End Month":"Jun","%Change Jun":-8.19},"BEC":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":1.97,"End Month":"Jun","%Change Jun":-8.97},"BEM":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":11.59,"End Month":"Jun","%Change Jun":-4.95},"BGRIM":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":6.15,"End Month":"Jun","%Change Jun":-5.71},"BH":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":9.06,"End Month":"Jun","%Change Jun":-1.71},"BLA":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-8.24,"End Month":"Jun","%Change Jun":8.02},"BPP":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-2.45,"End Month":"Jun","%Change Jun":-8.18},"BTS":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-0.56,"End Month":"Jun","%Change Jun":-6.82},"CBG":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":1.84,"End Month":"Jun","%Change Jun":-6.36},"CENTEL":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-5.08,"End Month":"Jun","%Change Jun":0.0},"CHG":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-0.53,"End Month":"Jun","%Change Jun":-0.54},"CK":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":6.63,"End Month":"Jun","%Change Jun":-6.7},"CKP":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":1.87,"End Month":"Jun","%Change Jun":-1.82},"COM7":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-7.36,"End Month":"Jun","%Change Jun":-16.0},"CPALL":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":1.15,"End Month":"Jun","%Change Jun":-9.47},"CPF":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":7.44,"End Month":"Jun","%Change Jun":-0.95},"CPN":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":5.33,"End Month":"Jun","%Change Jun":-8.2},"CRC":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-3.18,"End Month":"Jun","%Change Jun":-9.21},"DOHOME":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-5.47,"End Month":"Jun","%Change Jun":-11.64},"DTAC":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-4.44,"End Month":"Jun","%Change Jun":-3.95},"EA":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":2.87,"End Month":"Jun","%Change Jun":-8.64},"EGCO":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":8.11,"End Month":"Jun","%Change Jun":-4.46},"EPG":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":0.0,"End Month":"Jun","%Change Jun":-3.52},"ESSO":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":9.57,"End Month":"Jun","%Change Jun":14.56},"GLOBAL":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-2.3,"End Month":"Jun","%Change Jun":-8.13},"GPSC":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":0.75,"End Month":"Jun","%Change Jun":-9.56},"GULF":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":0.52,"End Month":"Jun","%Change Jun":-7.18},"GUNKUL":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":3.57,"End Month":"Jun","%Change Jun":-6.14},"HANA":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":3.3,"End Month":"Jun","%Change Jun":-11.7},"HMPRO":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":1.36,"End Month":"Jun","%Change Jun":-10.27},"INTUCH":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":3.25,"End Month":"Jun","%Change Jun":-6.6},"IRPC":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-1.14,"End Month":"Jun","%Change Jun":-4.07},"IVL":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":8.84,"End Month":"Jun","%Change Jun":2.55},"JMART":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":0.0,"End Month":"Jun","%Change Jun":-7.56},"JMT":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-9.36,"End Month":"Jun","%Change Jun":-6.43},"KBANK":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-2.65,"End Month":"Jun","%Change Jun":0.68},"KCE":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":7.32,"End Month":"Jun","%Change Jun":-7.2},"KEX":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":3.54,"End Month":"Jun","%Change Jun":0.0},"KKP":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-1.37,"End Month":"Jun","%Change Jun":-9.41},"KTB":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":1.34,"End Month":"Jun","%Change Jun":2.65},"KTC":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":6.52,"End Month":"Jun","%Change Jun":-7.69},"LH":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-5.29,"End Month":"Jun","%Change Jun":-8.38},"MAJOR":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":1.42,"End Month":"Jun","%Change Jun":-2.34},"MEGA":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":7.77,"End Month":"Jun","%Change Jun":0.98},"MINT":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-0.71,"End Month":"Jun","%Change Jun":-6.43},"MTC":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":7.65,"End Month":"Jun","%Change Jun":-12.76},"OR":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":11.45,"End Month":"Jun","%Change Jun":-6.36},"ORI":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-0.91,"End Month":"Jun","%Change Jun":-5.61},"OSP":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-0.71,"End Month":"Jun","%Change Jun":-4.32},"PLANB":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":0.65,"End Month":"Jun","%Change Jun":-5.23},"PTG":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":2.82,"End Month":"Jun","%Change Jun":-5.56},"PTT":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":2.68,"End Month":"Jun","%Change Jun":-9.15},"PTTEP":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":14.14,"End Month":"Jun","%Change Jun":-0.9},"PTTGC":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-3.98,"End Month":"Jun","%Change Jun":-6.22},"QH":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":0.0,"End Month":"Jun","%Change Jun":-3.57},"RATCH":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-5.65,"End Month":"Jun","%Change Jun":-10.18},"RBF":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-8.14,"End Month":"Jun","%Change Jun":-9.32},"RCL":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":5.71,"End Month":"Jun","%Change Jun":-8.7},"RS":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-5.92,"End Month":"Jun","%Change Jun":-6.79},"SAWAD":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":5.71,"End Month":"Jun","%Change Jun":-12.22},"SCB":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-3.83,"End Month":"Jun","%Change Jun":-4.93},"SCC":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":0.54,"End Month":"Jun","%Change Jun":-4.31},"SCGP":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":3.18,"End Month":"Jun","%Change Jun":-7.02},"SINGER":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-4.52,"End Month":"Jun","%Change Jun":-7.73},"SIRI":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-0.87,"End Month":"Jun","%Change Jun":-10.71},"SPALI":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-7.27,"End Month":"Jun","%Change Jun":-6.28},"SPRC":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":12.84,"End Month":"Jun","%Change Jun":2.46},"STA":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-0.8,"End Month":"Jun","%Change Jun":-15.25},"STARK":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":6.9,"End Month":"Jun","%Change Jun":-10.61},"STEC":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":0.77,"End Month":"Jun","%Change Jun":-4.55},"STGT":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-16.25,"End Month":"Jun","%Change Jun":-18.69},"SUPER":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-1.16,"End Month":"Jun","%Change Jun":-8.24},"SYNEX":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-7.53,"End Month":"Jun","%Change Jun":-16.89},"TASCO":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":3.7,"End Month":"Jun","%Change Jun":-5.39},"TCAP":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":0.63,"End Month":"Jun","%Change Jun":-3.8},"THANI":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":5.56,"End Month":"Jun","%Change Jun":-10.48},"TIDLOR":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-6.94,"End Month":"Jun","%Change Jun":-10.45},"TISCO":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":0.27,"End Month":"Jun","%Change Jun":-2.19},"TOP":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":2.2,"End Month":"Jun","%Change Jun":-7.39},"TQM":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":0.0,"End Month":"Jun","%Change Jun":-1.03},"TRUE":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-6.38,"End Month":"Jun","%Change Jun":-3.07},"TTA":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":4.66,"End Month":"Jun","%Change Jun":-7.0},"TTB":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-1.55,"End Month":"Jun","%Change Jun":-1.59},"TU":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":1.78,"End Month":"Jun","%Change Jun":0.58},"TVO":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":1.56,"End Month":"Jun","%Change Jun":-1.55},"VGI":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":9.63,"End Month":"Jun","%Change Jun":-8.3},"WHA":{"Selected Date":"2022-06-16","Begin Month":"May","%Change May":-1.84,"End Month":"Jun","%Change Jun":-6.75}}
data = pd.DataFrame.from_dict(data)
df1 = data.T
df1.reset_index(inplace=True)
df1.rename(columns = {'index':'Quote'}, inplace = True)
print(data)
print(df1)

fig = go.Figure()
fig.add_trace(go.Bar(
    y=df1["%Change Jun"],
    x=df1["Quote"],
    name="%Change Jun",
    marker=dict(
        color='rgba(0,128,0, 0.6)',
        line=dict(color='rgba(0,128,0, 0.5)', width=0.05)
    )
))
fig.add_trace(go.Bar(
    y=df1["%Change May"],
    x=df1["Quote"],
    name="%Change May",
    marker=dict(
        color='rgba(0,0,255, 0.6)',
        line=dict(color='rgba(0,0,255, 0.5)', width=0.05)
    )
))
fig.update_yaxes(showgrid=True, gridwidth=1, gridcolor='lightgrey')
fig.update_layout(
        yaxis=dict(
        title_text="% Change",
        ticktext=["-40%","-30%","-20%","-10%","0%", "10%", "20%", "30%","40%"],
        tickvals=[-40,-30,-20,-10,0, 10, 20, 30, 40],
        tickmode="array",
        titlefont=dict(size=15),
    ),
    autosize=False,
    width=1700,
    height=700,
    paper_bgcolor='rgba(255,255,255)',
    plot_bgcolor='rgba(0,0,0,0)',
    title={
        'text': "Buying Recovery SET100",
        'y':0.96,
        'x':0.5,
        'xanchor': 'center',
        'yanchor': 'top'},
    barmode='stack')
fig.show()